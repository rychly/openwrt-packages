# a destination number for administrative messages sent without using the filesystem
#admin_to = 420123456789

# splits large text messages to (3) concatenated format
autosplit = 3

# access control for sending messages
blacklist = /mnt/etc/smsd.black
whitelist = /mnt/etc/smsd.white

# blocking of the modem for Y seconds after X errors while sending messages
blockafter = 5
blocktime = 600

# a program that checks if a message file is valid and move it into 'checked' directory (exit code 2)
#checkhandler = /mnt/usr/local/bin/sms-make-short

# timestamp format Y in the beginning (X=1) of filenames of incoming messages and format Z inside the files
date_filename = 1
date_filename_format = %F-%H-%M-%S
datetime_format = %F-%H-%M-%S

# the incoming Unicode text is decoded internally
decode_unicode_text = yes

# sleep so many seconds when it has nothing to do
delaytime = 30

# use inotifywait to monitor outgoing directory so new files are spooled as fast as possible, even when mainprocess has long sleeping times to reduce CPU load
notifier = yes

# names of modems
devices = E173s

# a program or script that will execute whenever a message was sent, received or failed
eventhandler = /mnt/usr/local/bin/eventhandler-for-sms

# hangup by ATH (not AT+CHUP) if detected unexpected input contains "RING"
hangup_incoming_call = yes
voicecall_hangup_ath = yes

# incoming messages using ISO or GSM alphabet are stored using UTF-8
incoming_utf8 = yes

# each incoming multipart message (text X and binary Y) is combined internally
internal_combine = yes
internal_combine_binary = yes

# Type Of Address of outgoing messages is international by default only if number matches to list
international_prefixes = 420

# log file (empty = syslog)
#logfile = /var/log/smsd.log
# logging charset conversions
#log_charconv = yes
# log level (5=send/receive, 7=debug)
loglevel = 5
# splitted logs (cannot be used when syslog is used for logging)
#smart_logging = yes

# empty the first SIM card memory before sending SM
receive_before_send = yes

# include counters and signal quality into statistics (which should be enabled during compilation)
status_include_counters = yes
status_signal_quality = yes

# remove trailing whitespaces from outgoing messages
trim_text = yes

# process owner and files rights
umask = 600
user = root
group = root

# info and PID files
infofile = /var/run/smsd.working
pidfile = /var/run/smsd.pid

# default messages validity period (255 = 255-192 = 63 weeks)
validity = 255

## directories
# for messages ready to send (checked by a 'checkhandler' program with exit code 2)
checked = /var/sms.checked
#checked = /mnt/var/SMSRoot/checked
# where to keep failed files
failed = /mnt/var/SMSRoot/failed
# for incoming messages
incoming = /mnt/var/SMSRoot/incoming
# for outgoing messages
outgoing = /var/sms.outgoing
#outgoing = /mnt/var/SMSRoot/outgoing
# for incomming phonecalls
phonecalls = /mnt/var/SMSRoot/phonecall
# for status report messages
report = /var/sms.report
#report = /mnt/var/SMSRoot/report
# for concatenation storage
saved = /var/sms.concatenation
#saved = /mnt/var/SMSRoot/concatenation
# for sent messages if needed
#sent = /mnt/var/SMSRoot/sent
# for message counter files, etc. (and statistic files if enabled during compilation)
stats = /var/sms.stats


[E173s]

# the speed of the serial communication in bits per second (19200 for older devices)
#baudrate = 19200

# incoming messages are checked by CMGD (2; which is supported by the modem)
check_memory_method = 2

# network registration is always (1) checked
check_network = 1

# the device name of the serial port to the modem
device = /dev/ttyUSB2

# read incoming SM from this modem with high priority
incoming = high

## modem initialisation commands
# disable system commands that are sent to the modem before anything else is done
pre_init = no
# and enable user defined modem initialisation commands
# ATE0		echo off, required by smstools
# ATE1		echo on
# AT+CMEE=2	provide an error message (0) with the mistake number codes (1) and indications for detail (2)
# AT+CREG=1	AT+CREG? no location information (1), otherwise (2) smstools unable to detect successful registration
# AT^CURC=0	turn off periodic status messages (RSSI status, etc.)
# AT+CGATT=0	detach from GPRS/Packet Domain network/service
# AT+CNMI=...	disable message routing mode, specifically the following
#  1 = the received text messages will be sent directly to the TE
#  1 = SMSs stored in the ME wil be returned
#  0 = Cell Broadcast will not be noticed
#  2 = new status reports stored in ME will be returned
#  1 = fixed value
# AT+COPS?	get active network Name and ID
# AT+COPS=1,2,"23002"	network operator is selected manually in the numeric format as (1,"EUROTEL - CZ","ET - CZ","23002",0)
init = ATE0;+CMEE=2;+CREG=1;^CURC=0;+CGATT=0;+CNMI=1,1,0,2,1;+COPS?

# the first memory space number for received messages (some of Huawei start from 0)
memory_start = 1

# a phone number of the SIM
number = 420987654321

# missed phonecalls are reported with Calling line identification report (hanguped first)
phonecalls = clip

# skip the whole PIN handling procedure (PIN is disabled)
pin = ignore

# program requests a status report SM from the SMSC for each sent message
report = no

# do not print details from device to the log at start
report_device_details = no

# ignore Bit Error Rate when signal quality is asked as this always provides "Bit Error Rate: not known or not detectable"
signal_quality_ber_ignore = yes
